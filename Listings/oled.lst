C51 COMPILER V9.59.0.0   OLED                                                              04/09/2021 17:07:57 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE OLED
OBJECT MODULE PLACED IN .\Objects\oled.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Core\Src\oled.c LARGE OPTIMIZE(8,SPEED) BROWSE INCDIR(.\Core\Inc) DEBUG 
                    -OBJECTEXTEND PRINT(.\Listings\oled.lst) OBJECT(.\Objects\oled.obj)

line level    source

   1          /**
   2           ******************************************************************************
   3           * @file    oled.c
   4           * @author  sky-vocality
   5           * @version V1.0.0
   6           * @date    9-April-2021
   7           * @brief  This file is a oled driver
   8           * @License:GNU General Public License v3.0         
   9           ******************************************************************************
  10           * @attention
  11           * 
  12           * 
  13           * 
  14           * 
  15           * 
  16           * 
  17           * 
  18           * 
  19           ******************************************************************************
  20          **/
  21          
  22          #include "oled.h"
  23          
  24          #define LCD_SCL P32
  25          #define LCD_SDA P33
  26          #define LCD_RST P34
  27          
  28          #define HIGH 1
  29          #define LOW  0
  30          #define IICADRR 0x78
  31          #define X_WIDTH 132
  32          #define Y_WIDTH 64
  33          
  34          //asciiÂ≠óÁ¨¶ÈõÜ
  35          const unsigned char F6x8[][6] =
  36          {
  37              { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },   // sp
  38              { 0x00, 0x00, 0x00, 0x2f, 0x00, 0x00 },   // !
  39              { 0x00, 0x00, 0x07, 0x00, 0x07, 0x00 },   // "
  40              { 0x00, 0x14, 0x7f, 0x14, 0x7f, 0x14 },   // #
  41              { 0x00, 0x24, 0x2a, 0x7f, 0x2a, 0x12 },   // $
  42              { 0x00, 0x62, 0x64, 0x08, 0x13, 0x23 },   // %
  43              { 0x00, 0x36, 0x49, 0x55, 0x22, 0x50 },   // &
  44              { 0x00, 0x00, 0x05, 0x03, 0x00, 0x00 },   // '
  45              { 0x00, 0x00, 0x1c, 0x22, 0x41, 0x00 },   // (
  46              { 0x00, 0x00, 0x41, 0x22, 0x1c, 0x00 },   // )
  47              { 0x00, 0x14, 0x08, 0x3E, 0x08, 0x14 },   // *
  48              { 0x00, 0x08, 0x08, 0x3E, 0x08, 0x08 },   // +
  49              { 0x00, 0x00, 0x00, 0xA0, 0x60, 0x00 },   // ,
  50              { 0x00, 0x08, 0x08, 0x08, 0x08, 0x08 },   // -
  51              { 0x00, 0x00, 0x60, 0x60, 0x00, 0x00 },   // .
  52              { 0x00, 0x20, 0x10, 0x08, 0x04, 0x02 },   // /
  53              { 0x00, 0x3E, 0x51, 0x49, 0x45, 0x3E },   // 0
  54              { 0x00, 0x00, 0x42, 0x7F, 0x40, 0x00 },   // 1
C51 COMPILER V9.59.0.0   OLED                                                              04/09/2021 17:07:57 PAGE 2   

  55              { 0x00, 0x42, 0x61, 0x51, 0x49, 0x46 },   // 2
  56              { 0x00, 0x21, 0x41, 0x45, 0x4B, 0x31 },   // 3
  57              { 0x00, 0x18, 0x14, 0x12, 0x7F, 0x10 },   // 4
  58              { 0x00, 0x27, 0x45, 0x45, 0x45, 0x39 },   // 5
  59              { 0x00, 0x3C, 0x4A, 0x49, 0x49, 0x30 },   // 6
  60              { 0x00, 0x01, 0x71, 0x09, 0x05, 0x03 },   // 7
  61              { 0x00, 0x36, 0x49, 0x49, 0x49, 0x36 },   // 8
  62              { 0x00, 0x06, 0x49, 0x49, 0x29, 0x1E },   // 9
  63              { 0x00, 0x00, 0x36, 0x36, 0x00, 0x00 },   // :
  64              { 0x00, 0x00, 0x56, 0x36, 0x00, 0x00 },   // ;
  65              { 0x00, 0x08, 0x14, 0x22, 0x41, 0x00 },   // <
  66              { 0x00, 0x14, 0x14, 0x14, 0x14, 0x14 },   // =
  67              { 0x00, 0x00, 0x41, 0x22, 0x14, 0x08 },   // >
  68              { 0x00, 0x02, 0x01, 0x51, 0x09, 0x06 },   // ?
  69              { 0x00, 0x32, 0x49, 0x59, 0x51, 0x3E },   // @
  70              { 0x00, 0x7C, 0x12, 0x11, 0x12, 0x7C },   // A
  71              { 0x00, 0x7F, 0x49, 0x49, 0x49, 0x36 },   // B
  72              { 0x00, 0x3E, 0x41, 0x41, 0x41, 0x22 },   // C
  73              { 0x00, 0x7F, 0x41, 0x41, 0x22, 0x1C },   // D
  74              { 0x00, 0x7F, 0x49, 0x49, 0x49, 0x41 },   // E
  75              { 0x00, 0x7F, 0x09, 0x09, 0x09, 0x01 },   // F
  76              { 0x00, 0x3E, 0x41, 0x49, 0x49, 0x7A },   // G
  77              { 0x00, 0x7F, 0x08, 0x08, 0x08, 0x7F },   // H
  78              { 0x00, 0x00, 0x41, 0x7F, 0x41, 0x00 },   // I
  79              { 0x00, 0x20, 0x40, 0x41, 0x3F, 0x01 },   // J
  80              { 0x00, 0x7F, 0x08, 0x14, 0x22, 0x41 },   // K
  81              { 0x00, 0x7F, 0x40, 0x40, 0x40, 0x40 },   // L
  82              { 0x00, 0x7F, 0x02, 0x0C, 0x02, 0x7F },   // M
  83              { 0x00, 0x7F, 0x04, 0x08, 0x10, 0x7F },   // N
  84              { 0x00, 0x3E, 0x41, 0x41, 0x41, 0x3E },   // O
  85              { 0x00, 0x7F, 0x09, 0x09, 0x09, 0x06 },   // P
  86              { 0x00, 0x3E, 0x41, 0x51, 0x21, 0x5E },   // Q
  87              { 0x00, 0x7F, 0x09, 0x19, 0x29, 0x46 },   // R
  88              { 0x00, 0x46, 0x49, 0x49, 0x49, 0x31 },   // S
  89              { 0x00, 0x01, 0x01, 0x7F, 0x01, 0x01 },   // T
  90              { 0x00, 0x3F, 0x40, 0x40, 0x40, 0x3F },   // U
  91              { 0x00, 0x1F, 0x20, 0x40, 0x20, 0x1F },   // V
  92              { 0x00, 0x3F, 0x40, 0x38, 0x40, 0x3F },   // W
  93              { 0x00, 0x63, 0x14, 0x08, 0x14, 0x63 },   // X
  94              { 0x00, 0x07, 0x08, 0x70, 0x08, 0x07 },   // Y
  95              { 0x00, 0x61, 0x51, 0x49, 0x45, 0x43 },   // Z
  96              { 0x00, 0x00, 0x7F, 0x41, 0x41, 0x00 },   // [
  97              { 0x00, 0x55, 0x2A, 0x55, 0x2A, 0x55 },   // 55
  98              { 0x00, 0x00, 0x41, 0x41, 0x7F, 0x00 },   // ]
  99              { 0x00, 0x04, 0x02, 0x01, 0x02, 0x04 },   // ^
 100              { 0x00, 0x40, 0x40, 0x40, 0x40, 0x40 },   // _
 101              { 0x00, 0x00, 0x01, 0x02, 0x04, 0x00 },   // '
 102              { 0x00, 0x20, 0x54, 0x54, 0x54, 0x78 },   // a
 103              { 0x00, 0x7F, 0x48, 0x44, 0x44, 0x38 },   // b
 104              { 0x00, 0x38, 0x44, 0x44, 0x44, 0x20 },   // c
 105              { 0x00, 0x38, 0x44, 0x44, 0x48, 0x7F },   // d
 106              { 0x00, 0x38, 0x54, 0x54, 0x54, 0x18 },   // e
 107              { 0x00, 0x08, 0x7E, 0x09, 0x01, 0x02 },   // f
 108              { 0x00, 0x18, 0xA4, 0xA4, 0xA4, 0x7C },   // g
 109              { 0x00, 0x7F, 0x08, 0x04, 0x04, 0x78 },   // h
 110              { 0x00, 0x00, 0x44, 0x7D, 0x40, 0x00 },   // i
 111              { 0x00, 0x40, 0x80, 0x84, 0x7D, 0x00 },   // j
 112              { 0x00, 0x7F, 0x10, 0x28, 0x44, 0x00 },   // k
 113              { 0x00, 0x00, 0x41, 0x7F, 0x40, 0x00 },   // l
 114              { 0x00, 0x7C, 0x04, 0x18, 0x04, 0x78 },   // m
 115              { 0x00, 0x7C, 0x08, 0x04, 0x04, 0x78 },   // n
 116              { 0x00, 0x38, 0x44, 0x44, 0x44, 0x38 },   // o
C51 COMPILER V9.59.0.0   OLED                                                              04/09/2021 17:07:57 PAGE 3   

 117              { 0x00, 0xFC, 0x24, 0x24, 0x24, 0x18 },   // p
 118              { 0x00, 0x18, 0x24, 0x24, 0x18, 0xFC },   // q
 119              { 0x00, 0x7C, 0x08, 0x04, 0x04, 0x08 },   // r
 120              { 0x00, 0x48, 0x54, 0x54, 0x54, 0x20 },   // s
 121              { 0x00, 0x04, 0x3F, 0x44, 0x40, 0x20 },   // t
 122              { 0x00, 0x3C, 0x40, 0x40, 0x20, 0x7C },   // u
 123              { 0x00, 0x1C, 0x20, 0x40, 0x20, 0x1C },   // v
 124              { 0x00, 0x3C, 0x40, 0x30, 0x40, 0x3C },   // w
 125              { 0x00, 0x44, 0x28, 0x10, 0x28, 0x44 },   // x
 126              { 0x00, 0x1C, 0xA0, 0xA0, 0xA0, 0x7C },   // y
 127              { 0x00, 0x44, 0x64, 0x54, 0x4C, 0x44 },   // z
 128              { 0x14, 0x14, 0x14, 0x14, 0x14, 0x14 }    // horiz lines
 129          };
 130          
 131          void Delay_1ms(unsigned int Del_1ms)
 132          { 
 133   1          Delay_Ms(Del_1ms);
 134   1      }
 135          
 136          void IIC_Start()
 137          {
 138   1          LCD_SCL = HIGH;
 139   1          Delay_1ms(2);
 140   1          LCD_SDA = HIGH;
 141   1          Delay_1ms(2);
 142   1          LCD_SDA = LOW;
 143   1          Delay_1ms(2);
 144   1          LCD_SCL = LOW;
 145   1          Delay_1ms(2);
 146   1      }
 147          
 148          void IIC_Stop()
 149          {
 150   1          LCD_SCL = LOW;
 151   1          Delay_1ms(2);
 152   1          LCD_SDA = LOW;
 153   1          Delay_1ms(2);
 154   1          LCD_SCL = HIGH;
 155   1          Delay_1ms(2);
 156   1          LCD_SDA = HIGH;
 157   1          Delay_1ms(2);
 158   1      }
 159          
 160          void Write_IIC_Byte(unsigned char IIC_Byte)
 161          {
 162   1          unsigned char i;
 163   1          for(i=0;i<8;i++)            
 164   1          {
 165   2              if(IIC_Byte & 0x80)
 166   2              {                 
 167   3              LCD_SDA=HIGH;
 168   3              }
 169   2              else 
 170   2              {      
 171   3              LCD_SDA=LOW;
 172   3              }
 173   2              Delay_1ms(1);
 174   2              LCD_SCL=HIGH;
 175   2              Delay_1ms(1);
 176   2              LCD_SCL=LOW;
 177   2              Delay_1ms(1);
 178   2              IIC_Byte<<=1;           //loop
C51 COMPILER V9.59.0.0   OLED                                                              04/09/2021 17:07:57 PAGE 4   

 179   2          }
 180   1          LCD_SDA=1;
 181   1          Delay_1ms(1);
 182   1          LCD_SCL=1;
 183   1          Delay_1ms(1);
 184   1          LCD_SCL=0;
 185   1          Delay_1ms(1);
 186   1      }
 187          
 188          void LCD_WrDat(unsigned char dat)
 189          {
 190   1          IIC_Start();
 191   1          Write_IIC_Byte(IICADRR);                    
 192   1          Write_IIC_Byte(0x40);                       //write data
 193   1          Write_IIC_Byte(dat);
 194   1          IIC_Stop();
 195   1      }
 196          
 197          void LCD_WrCmd(unsigned char cmd)
 198          {
 199   1          IIC_Start();
 200   1          Write_IIC_Byte(IICADRR);              //Slave Address,SA0=0
 201   1          Write_IIC_Byte(0x00);                       //write command
 202   1          Write_IIC_Byte(cmd); 
 203   1          IIC_Stop();
 204   1      }
 205          
 206          //========================================================================
 207          // Function:void LCD_Set_Pos(unsigned char x, unsigned char y)|ÂáΩÊï∞:  void LCD_Set_Pos(unsigned char x, 
             -unsigned char y)
 208          // Description:Set the coordinates of the pixels|ÊèèËø∞:ËÆæÁΩÆÂÉèÁ¥†ÁÇπÁöÑÂùêÊ†á
 209          // Parameter: x,y:The coordinate value (x, y) of the pointÔºå the range of x is 0-127, and the range of y 
             -is 0-64|ÂèÇÊï∞:ÁÇπÁöÑÂùêÊ†áÂÄº(x,y),xÁöÑËåÉÂõ¥0ÔΩû127ÔºåyÁöÑËåÉÂõ¥0ÔΩû64
 210          // 
 211          //       
 212          // Return:|ËøîÂõû: 
 213          // Version:VER1.0.0|ÁâàÊú¨: VER1.0.0
 214          // Date:2021-04-09|Êó•Êúü: 2021-04-09
 215          // Author: sky-vocality|‰ΩúËÄÖ: sky-vocality
 216          // Note:|Â§áÊ≥®:
 217          //      
 218          //      
 219          //      
 220          //      
 221          //      
 222          //========================================================================
 223          void LCD_Set_Pos(unsigned char x, unsigned char y)
 224          {
 225   1          LCD_WrCmd(0xb0+y);
 226   1          LCD_WrCmd(((x&0xf0)>>4)|0x10);
 227   1          LCD_WrCmd((x&0x0f)); 
 228   1      } 
 229          
 230          //========================================================================
 231          // Function:void LCD_Fill(unsigned char bmp_data)|ÂáΩÊï∞:void LCD_Fill(unsigned char bmp_data)
 232          // Description:Initial screen clearing|ÊèèËø∞:ÂàùÂßãÊ∏ÖÂ±è
 233          // Parameter: bmp_data:Populated data|ÂèÇÊï∞:Â°´ÂÖÖÁöÑÊï∞ÊçÆ
 234          // 
 235          //       
 236          // Return:|ËøîÂõû: 
 237          // Version:VER1.0.0|ÁâàÊú¨: VER1.0.0
 238          // Date:2021-04-09|Êó•Êúü: 2021-04-09
C51 COMPILER V9.59.0.0   OLED                                                              04/09/2021 17:07:57 PAGE 5   

 239          // Author: sky-vocality|‰ΩúËÄÖ: sky-vocality
 240          // Note:|Â§áÊ≥®:
 241          //      
 242          //      
 243          //      
 244          //      
 245          //      
 246          //========================================================================
 247          void LCD_Fill(unsigned char bmp_data)
 248          {
 249   1          unsigned char y,x;
 250   1      
 251   1          for(y=0;y<8;y++)
 252   1          {
 253   2              LCD_WrCmd(0xb0+y);
 254   2              LCD_WrCmd(0x01);
 255   2              LCD_WrCmd(0x10);
 256   2              for(x=0;x<X_WIDTH;x++)
 257   2                  LCD_WrDat(bmp_data);
 258   2          }
 259   1      }
 260          
 261          //========================================================================
 262          // Function:void LCD_CLS(void)|ÂáΩÊï∞:void LCD_CLS(void)
 263          // Description:Screen clearing|ÊèèËø∞:Ê∏ÖÂ±è
 264          // Parameter:|ÂèÇÊï∞:
 265          // 
 266          //       
 267          // Return:|ËøîÂõû: 
 268          // Version:VER1.0.0|ÁâàÊú¨: VER1.0.0
 269          // Date:2021-04-09|Êó•Êúü: 2021-04-09
 270          // Author: sky-vocality|‰ΩúËÄÖ: sky-vocality
 271          // Note:|Â§áÊ≥®:
 272          //      
 273          //      
 274          //      
 275          //      
 276          //      
 277          //========================================================================
 278          void LCD_CLS(void)
 279          {
 280   1          unsigned char y,x;  
 281   1          for(y=0;y<8;y++)
 282   1          {
 283   2              LCD_WrCmd(0xb0+y);
 284   2              LCD_WrCmd(0x01);
 285   2              LCD_WrCmd(0x10); 
 286   2              for(x=0;x<X_WIDTH;x++)
 287   2              LCD_WrDat(0);
 288   2          }
 289   1      }
 290          
 291          void LCD_Init(void)        
 292          { 
 293   1          //-----Á´ØÂè£ÂàùÂßãÂåñ----//
 294   1          GPIO_InitTypeDef GPIO_InitTypeDef;
 295   1          GPIO_InitTypeDef.Mode = GPIO_PullUp;//‰∏äÊãâÂáÜÂèåÂêëÂè£
 296   1          GPIO_InitTypeDef.Pin = GPIO_Pin_3;
 297   1          GPIO_Inilize(GPIO_P2 ,&GPIO_InitTypeDef);
 298   1          GPIO_Inilize(GPIO_P3 ,&GPIO_InitTypeDef);
 299   1          GPIO_Inilize(GPIO_P4 ,&GPIO_InitTypeDef);
 300   1      
C51 COMPILER V9.59.0.0   OLED                                                              04/09/2021 17:07:57 PAGE 6   

 301   1          LCD_SCL=1;              
 302   1          LCD_RST=0;
 303   1          Delay_Ms(500);
 304   1          LCD_RST=1;
 305   1      
 306   1          LCD_WrCmd(0xae);//--turn off oled panel
 307   1          LCD_WrCmd(0x00);//---set low column address
 308   1          LCD_WrCmd(0x10);//---set high column address
 309   1          LCD_WrCmd(0x40);//--set start line address  Set Mapping RAM Display Start Line (0x00~0x3F)
 310   1          LCD_WrCmd(0x81);//--set contrast control register
 311   1          LCD_WrCmd(0xcf); // Set SEG Output Current Brightness
 312   1          LCD_WrCmd(0xa1);//--Set SEG/Column Mapping     0xa0Â∑¶Âè≥ÂèçÁΩÆ 0xa1Ê≠£Â∏∏
 313   1          LCD_WrCmd(0xc8);//Set COM/Row Scan Direction   0xc0‰∏ä‰∏ãÂèçÁΩÆ 0xc8Ê≠£Â∏∏
 314   1          LCD_WrCmd(0xa6);//--set normal display
 315   1          LCD_WrCmd(0xa8);//--set multiplex ratio(1 to 64)
 316   1          LCD_WrCmd(0x3f);//--1/64 duty
 317   1          LCD_WrCmd(0xd3);//-set display offset       Shift Mapping RAM Counter (0x00~0x3F)
 318   1          LCD_WrCmd(0x00);//-not offset
 319   1          LCD_WrCmd(0xd5);//--set display clock divide ratio/oscillator frequency
 320   1          LCD_WrCmd(0x80);//--set divide ratio, Set Clock as 100 Frames/Sec
 321   1          LCD_WrCmd(0xd9);//--set pre-charge period
 322   1          LCD_WrCmd(0xf1);//Set Pre-Charge as 15 Clocks & Discharge as 1 Clock
 323   1          LCD_WrCmd(0xda);//--set com pins hardware configuration
 324   1          LCD_WrCmd(0x12);
 325   1          LCD_WrCmd(0xdb);//--set vcomh
 326   1          LCD_WrCmd(0x40);//Set VCOM Deselect Level
 327   1          LCD_WrCmd(0x20);//-Set Page Addressing Mode (0x00/0x01/0x02)
 328   1          LCD_WrCmd(0x02);//
 329   1          LCD_WrCmd(0x8d);//--set Charge Pump enable/disable
 330   1          LCD_WrCmd(0x14);//--set(0x10) disable
 331   1          LCD_WrCmd(0xa4);// Disable Entire Display On (0xa4/0xa5)
 332   1          LCD_WrCmd(0xa6);// Disable Inverse Display On (0xa6/a7) 
 333   1          LCD_WrCmd(0xaf);//--turn on oled panel
 334   1          LCD_Fill(0x00);  //ÂàùÂßãÊ∏ÖÂ±è
 335   1          LCD_Set_Pos(0,0);    
 336   1      }
 337          
 338          //========================================================================
 339          // Function:void LCD_PutPixel(unsigned char x,unsigned char y)|ÂáΩÊï∞:void LCD_PutPixel(unsigned char x,un
             -signed char y)
 340          // Description:Draw a point|Áîª‰∏Ä‰∏™ÁÇπ
 341          // Parameter: x,y:The coordinate value of the point (x, y), the range of X is 0-127, and the range of Y is
             - 0-64|ÂèÇÊï∞:ÁÇπÁöÑÂùêÊ†áÂÄº(x,y),xÁöÑËåÉÂõ¥0ÔΩû127ÔºåyÁöÑËåÉÂõ¥0ÔΩû64
 342          // 
 343          //       
 344          // Return:|ËøîÂõû: 
 345          // Version:VER1.0.0|ÁâàÊú¨: VER1.0.0
 346          // Date:2021-04-09|Êó•Êúü: 2021-04-09
 347          // Author: sky-vocality|‰ΩúËÄÖ: sky-vocality
 348          // Note:|Â§áÊ≥®:
 349          //      
 350          //      
 351          //      
 352          //      
 353          //      
 354          //========================================================================
 355          void LCD_PutPixel(unsigned char x,unsigned char y)
 356          {
 357   1          unsigned char data1;
 358   1      
 359   1          LCD_Set_Pos(x,(unsigned char)(y>>3)); 
 360   1          data1 =(unsigned char)(0x01<<(y%8));
C51 COMPILER V9.59.0.0   OLED                                                              04/09/2021 17:07:57 PAGE 7   

 361   1          LCD_WrCmd((unsigned char)(0xb0+(y>>3)));
 362   1          LCD_WrCmd((unsigned char)(((x&0xf0)>>4)|0x10));
 363   1          LCD_WrCmd((unsigned char)((x&0x0f)|0x00));
 364   1          LCD_WrDat(data1);
 365   1      }
 366          
 367          //========================================================================
 368          // Function:void LCD_P6x8Str(unsigned char x,unsigned char y,unsigned char ch[])|ÂáΩÊï∞:void LCD_P6x8Str(u
             -nsigned char x,unsigned char y,unsigned char ch[])
 369          // Description:Writes a set of ascii strings|ÂÜôÂÖ•‰∏ÄÁªÑÊ†áÂáÜASCIIÂ≠óÁ¨¶‰∏≤
 370          // Parameter: x,y:Display location, y is the page range 0-7|ÂèÇÊï∞:ÊòæÁ§∫ÁöÑ‰ΩçÁΩÆÔºàx,yÔºâÔºåy‰∏∫È°µËåÉÂõ
             -¥0ÔΩû7
 371          //            *p:String to display|Ë¶ÅÊòæÁ§∫ÁöÑÂ≠óÁ¨¶‰∏≤
 372          //
 373          //       
 374          // Return:|ËøîÂõû: 
 375          // Version:VER1.0.0|ÁâàÊú¨: VER1.0.0
 376          // Date:2021-04-09|Êó•Êúü: 2021-04-09
 377          // Author: sky-vocality|‰ΩúËÄÖ: sky-vocality
 378          // Note:|Â§áÊ≥®:
 379          //      
 380          //      
 381          //      
 382          //      
 383          //      
 384          //======================================================================== 
 385          void LCD_P6x8Str(unsigned char x,unsigned char y,unsigned char ch[])
 386          {
 387   1          unsigned char c=0,i=0,j=0;      
 388   1          while (ch[j]!='\0')
 389   1          {    
 390   2              c =ch[j]-32;
 391   2              if(x>126){x=0;y++;}
 392   2              LCD_Set_Pos(x,y);    
 393   2              for(i=0;i<6;i++)     
 394   2                  LCD_WrDat(F6x8[c][i]);  
 395   2              x+=6;
 396   2              j++;
 397   2          }
 398   1      }
 399          
 400          //========================================================================
 401          // Function:void LCD_PrintU16(unsigned char x,unsigned char y,unsigned int num)|ÂáΩÊï∞:void LCD_PrintU16(u
             -nsigned char x,unsigned char y,unsigned int num)
 402          // Description:display uint|ÊòæÁ§∫Êó†Á¨¶Âè∑Êï¥Âûã
 403          // Parameter: x,y:Display location, y is the page range 0-7|ÂèÇÊï∞:ÊòæÁ§∫ÁöÑ‰ΩçÁΩÆÔºàx,yÔºâÔºåy‰∏∫È°µËåÉÂõ
             -¥0ÔΩû7
 404          //            num:uint to display|Ë¶ÅÊòæÁ§∫ÁöÑÊó†Á¨¶Âè∑Êï¥Âûã
 405          //
 406          //       
 407          // Return:|ËøîÂõû: 
 408          // Version:VER1.0.0|ÁâàÊú¨: VER1.0.0
 409          // Date:2021-04-09|Êó•Êúü: 2021-04-09
 410          // Author: sky-vocality|‰ΩúËÄÖ: sky-vocality
 411          // Note:|Â§áÊ≥®:
 412          //      
 413          //      
 414          //      
 415          //      
 416          //      
 417          //========================================================================
 418          void LCD_PrintU16(unsigned char x,unsigned char y,unsigned int num)
C51 COMPILER V9.59.0.0   OLED                                                              04/09/2021 17:07:57 PAGE 8   

 419          {
 420   1          unsigned char tmp[6],i;
 421   1          tmp[5]=0;
 422   1          tmp[4]=(unsigned char)(num%10+0x30);
 423   1          tmp[3]=(unsigned char)(num/10%10+0x30);
 424   1          tmp[2]=(unsigned char)(num/100%10+0x30);
 425   1          tmp[1]=(unsigned char)(num/1000%10+0x30);
 426   1          tmp[0]=(unsigned char)(num/10000%10+0x30);
 427   1      
 428   1          for(i=0;i<4;i++)
 429   1          {
 430   2              if(tmp[i]=='0')
 431   2                  tmp[i]=' ';
 432   2              else
 433   2                  break;
 434   2          }
 435   1      
 436   1          LCD_P6x8Str(x,y,tmp);
 437   1      
 438   1      }
 439          
 440          //========================================================================
 441          // Function:void LCD_PrintFloat(unsigned char x,unsigned char y,float num)|ÂáΩÊï∞:void LCD_PrintFloat(unsi
             -gned char x,unsigned char y,float num)
 442          // Description:display uint|ÊòæÁ§∫ÊµÆÁÇπÊï∞
 443          // Parameter: x,y:Display location, y is the page range 0-7|ÂèÇÊï∞:ÊòæÁ§∫ÁöÑ‰ΩçÁΩÆÔºàx,yÔºâÔºåy‰∏∫È°µËåÉÂõ
             -¥0ÔΩû7
 444          //            num:uint to display|Ë¶ÅÊòæÁ§∫ÁöÑÊµÆÁÇπÊï∞
 445          //
 446          //       
 447          // Return:|ËøîÂõû: 
 448          // Version:VER1.0.0|ÁâàÊú¨: VER1.0.0
 449          // Date:2021-04-09|Êó•Êúü: 2021-04-09
 450          // Author: sky-vocality|‰ΩúËÄÖ: sky-vocality
 451          // Note:|Â§áÊ≥®:
 452          //      
 453          //      
 454          //      
 455          //      
 456          //      
 457          //========================================================================
 458          void LCD_PrintFloat(unsigned char x,unsigned char y,float num)
 459          {
 460   1          unsigned char tmp[6],i;
 461   1          tmp[5]=0;
 462   1          num *= 10;
 463   1          if(num>0)
 464   1          {
 465   2              tmp[0]='+';
 466   2              tmp[4]=(unsigned char)((int)num%10+0x30);
 467   2              tmp[3]=(unsigned char)((int)num/10%10+0x30);
 468   2              tmp[2]=(unsigned char)((int)num/100%10+0x30);
 469   2              tmp[1]=(unsigned char)((int)num/1000%10+0x30);
 470   2          }
 471   1          else
 472   1          {
 473   2              tmp[0]='-';
 474   2              num=-num;
 475   2              tmp[4]=(unsigned char)((int)num%10+0x30);
 476   2              tmp[3]=(unsigned char)((int)num/10%10+0x30);
 477   2              tmp[2]=(unsigned char)((int)num/100%10+0x30);
 478   2              tmp[1]=(unsigned char)((int)num/1000%10+0x30);
C51 COMPILER V9.59.0.0   OLED                                                              04/09/2021 17:07:57 PAGE 9   

 479   2          }
 480   1          for(i=0;i<4;i++)
 481   1          {
 482   2              if(tmp[i]=='0')
 483   2                  tmp[i]=' ';
 484   2              else
 485   2                  break;
 486   2          }
 487   1          LCD_P6x8Str(x,y,tmp);
 488   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1336    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =    552      43
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
