C51 COMPILER V9.59.0.0   PID                                                               01/26/2021 12:39:54 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE PID
OBJECT MODULE PLACED IN .\Objects\pid.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Core\Src\pid.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\Core\Inc) DEBUG OBJECTE
                    -XTEND PRINT(.\Listings\pid.lst) TABS(2) OBJECT(.\Objects\pid.obj)

line level    source

   1          /**
   2           ******************************************************************************
   3           * @file    pid.c
   4           * @author  sky-vocality
   5           * @version V1.0.0
   6           * @date    26-January-2021
   7           * @brief  This file is a PID regulator
   8           * @License:GNU General Public License v3.0         
   9           ******************************************************************************
  10           * @attention
  11           * 
  12           * 
  13           * 
  14           * 
  15           * 
  16           * 
  17           * 
  18           * 
  19           ******************************************************************************
  20          **/
  21          
  22          #include "pid.h"
  23          
  24          #define Inter_Max   2000
  25          
  26          void PID_Control(float current_position, float expected_position,PID* motor_type)
  27          {
  28   1          //  float error_position;
  29   1        motor_type->error_last=motor_type->error_now;
  30   1        motor_type->error_now = expected_position - current_position;
  31   1        motor_type->error_inter += motor_type->error_now;
  32   1        // limit intergration of pid
  33   1        if(motor_type->error_inter>Inter_Max)
  34   1          motor_type->error_inter = Inter_Max;
  35   1        if(motor_type->error_inter<-Inter_Max)
  36   1          motor_type->error_inter = -Inter_Max;
  37   1          motor_type->pid_out = motor_type->Kp * motor_type->error_now + motor_type->Ki * motor_type->error_inte
             -r +  motor_type->Kd * (motor_type->error_now-motor_type->error_last);
  38   1          // limit out of pid
  39   1          if(motor_type->pid_out > motor_type->out_limit)
  40   1              motor_type->pid_out = motor_type->out_limit;
  41   1          else if (motor_type->pid_out < -motor_type->out_limit)
  42   1              motor_type->pid_out = -motor_type->out_limit;
  43   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    419    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      11
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
C51 COMPILER V9.59.0.0   PID                                                               01/26/2021 12:39:54 PAGE 2   

END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
